<!doctype html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>MyPromise</title>
</head>
<body>
<script src="lib/myPromise.js"></script>
<script>
    setTimeout(() => {
        console.log(1);
    })

    new Promise(resolve => {
        console.log(2);
        resolve()
    }).then(
        // 由于一开始状态就发生改变（为成功），同时回调函数已知，因此此时就放入微队列执行
        () => console.log(3)
    ).then(
        // 一开始状态未知，此时只是将函数存入callback数组，还没有放入微队列
        // 当打印 3 之后，状态才发生改变（为成功），此时才将“打印4”代码放入微队列执行
        () => console.log(4)
    )

    console.log(5);
    // 先执行同步回调：打印 2、5
    // 再执行微任务回调：打印 3、4
    // 最后执行宏任务回调：打印 1
</script>
</body>
</html>